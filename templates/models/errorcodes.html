{% load static mfilters %}
{% if verrors is not None %}
    <input type="text" id="errors_search" class="errors_search"
           placeholder="{% if lang == 'ru' %}Поиск по кодам ошибок{% else %}Search by error codes{% endif %}">
    <div class="errors">
        <div class="scrollbar-macosx">
            <div class="error-list">
                {% for error in verrors %}
                    <div class="error-title" data-target="#error{{ forloop.counter }}"
                         onclick="$('.error-title').removeClass('active');
                                 $(this).addClass('active');
                                 $( '.error-item' ).css('display', 'none');
                                 $( '#error{{ forloop.counter }}' ).toggle();">
                        <span class="errorcode"> {{ error.2 }} </span>
                    </div>
                {% endfor %}
            </div>
        </div>
        <div class="col">
            <div class="scrollbar-macosx">
                <div class="error-body">
                    {% for error in verrors %}
                        <div class="error-item" id="error{{ forloop.counter }}" style="display: none;">
                            <div><span>Error code:</span>
                                <p>{{ error.2 }}</p></div>
                            {% if error.3 %}
                                <div><span>Display:</span>
                                    <p>{{ error.3 }}</p></div>
                            {% endif %}
                            {% if error.4 %}
                                <div><span>Description:</span>
                                    <p>{{ error.4 }}</p></div>
                            {% endif %}
                            {% if error.5 %}
                                <div><span>Causes:</span>
                                    <p>{{ error.5 }}</p></div>
                            {% endif %}
                            {% if error.6 %}
                                <div><span>Remedy:</span>
                                    <p>{{ error.6 }}</p></div>
                            {% endif %}
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
{% endif %}
{% block ajaxjs %}
    <script type="text/javascript">
        function ErrorJqueryLoaded() {
            console.log('load js');
            $errors = "{{ verrors }}"
            $media_url = "{{ MEDIA_URL }}"
            $errors_script = "{% static 'model_errors.js' %}"
            $.getScript($errors_script)
        }

        function ErrorCheckJquery() {
            console.log('preload js');
            if (window.jQuery) {
                ErrorJqueryLoaded();
                console.log('loaded js');
            } else {
                window.setTimeout(ErrorCheckJquery, 100);
            }
        }

        ErrorCheckJquery();
    </script>
{% endblock %}